__NUXT_JSONP__("/posts/get-cookie-from-express-server", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac){B.slug="get-cookie-from-express-server";B.description="Feat. CORS";B.title="Express 서버에서 저장한 쿠키를 브라우저에서 보는 방법";B.tags="backend, express, nodejs, cors, javascript, js, axios, cookie";B.toc=[{id:q,depth:l,text:q},{id:C,depth:l,text:D},{id:E,depth:l,text:F},{id:G,depth:l,text:H},{id:r,depth:l,text:r},{id:s,depth:l,text:s}];B.body={type:"root",children:[{type:b,tag:m,props:{id:q},children:[{type:b,tag:h,props:{href:"#%EA%B0%9C%EC%9A%94",ariaHidden:j,tabIndex:n},children:[{type:b,tag:e,props:{className:[o,p]},children:[]}]},{type:a,value:q}]},{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"백엔드와 프론트엔드의 도메인 주소가 다르면 서버로부터 쿠키를 전달받을 수 없다."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"따라서 요청\u002F응답 헤더를 설정할 필요가 있다."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"프론트엔드에서는 AJAX 요청을 할 때 요청 헤더를 설정해야 한다."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"백엔드에서는 CORS 설정을 통해 응답 헤더를 설정해야 한다."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{id:C},children:[{type:b,tag:h,props:{href:"#%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%90%EC%84%9C-ajax-%EC%9A%94%EC%B2%AD-%EC%8B%9C-%EC%98%B5%EC%85%98-%EC%B6%94%EA%B0%80",ariaHidden:j,tabIndex:n},children:[{type:b,tag:e,props:{className:[o,p]},children:[]}]},{type:a,value:D}]},{type:a,value:c},{type:b,tag:t,props:{},children:[{type:a,value:"프론트에서 AJAX("},{type:b,tag:d,props:{},children:[{type:a,value:I}]},{type:a,value:" 등)로 요청을 보낼 때 "},{type:b,tag:d,props:{},children:[{type:a,value:J}]},{type:a,value:" 옵션 추가하여 요청 헤더를 설정한다."},{type:b,tag:"br",props:{},children:[]},{type:a,value:"\n(Vue의 "},{type:b,tag:d,props:{},children:[{type:a,value:I}]},{type:a,value:" 플러그인을 사용한다면 "},{type:b,tag:d,props:{},children:[{type:a,value:"axios.create()"}]},{type:a,value:"에 "},{type:b,tag:d,props:{},children:[{type:a,value:J}]},{type:a,value:" 옵션을 인수로 추가할 수 있다.)"}]},{type:a,value:c},{type:b,tag:m,props:{id:E},children:[{type:b,tag:h,props:{href:"#%EC%84%9C%EB%B2%84%EC%97%90%EC%84%9C-cors-%EC%84%A4%EC%A0%95",ariaHidden:j,tabIndex:n},children:[{type:b,tag:e,props:{className:[o,p]},children:[]}]},{type:a,value:F}]},{type:a,value:c},{type:b,tag:t,props:{},children:[{type:a,value:"응답 헤더의 "},{type:b,tag:d,props:{},children:[{type:a,value:K}]},{type:a,value:", "},{type:b,tag:d,props:{},children:[{type:a,value:u}]},{type:a,value:" 옵션 설정해야 한다."}]},{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"방법 1: Express의 "},{type:b,tag:d,props:{},children:[{type:a,value:v}]},{type:a,value:" 미들웨어 사용\n"},{type:b,tag:k,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:K}]},{type:a,value:L},{type:b,tag:d,props:{},children:[{type:a,value:v}]},{type:a,value:M},{type:b,tag:d,props:{},children:[{type:a,value:"{ credentials: true }"}]},{type:a,value:" 옵션 추가"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:u}]},{type:a,value:L},{type:b,tag:d,props:{},children:[{type:a,value:v}]},{type:a,value:M},{type:b,tag:d,props:{},children:[{type:a,value:"{ origin: 요청 오리진(출처 도메인) }"}]},{type:a,value:" 옵션 추가\n"},{type:b,tag:k,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"값을 "},{type:b,tag:d,props:{},children:[{type:a,value:"*"}]},{type:a,value:"으로 주면 "},{type:b,tag:"strong",props:{},children:[{type:a,value:"모든 오리진을 허용"}]},{type:a,value:"하므로 주의할 것"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"특정 오리진 대신 "},{type:b,tag:d,props:{},children:[{type:a,value:j}]},{type:a,value:" 값을 주면 현재 프론트 도메인 주소가 자동으로 "},{type:b,tag:d,props:{},children:[{type:a,value:u}]},{type:a,value:"에 들어간다. 만약 프론트의 도메인 주소가 "},{type:b,tag:d,props:{},children:[{type:a,value:N}]},{type:a,value:"이라면, "},{type:b,tag:d,props:{},children:[{type:a,value:u}]},{type:a,value:"의 값은 자동으로 "},{type:b,tag:d,props:{},children:[{type:a,value:N}]},{type:a,value:"이 된다."}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"방법 2: 라우터에서 응답 헤더를 직접 넣는 방법\n"},{type:b,tag:k,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"위의 방법처럼 "},{type:b,tag:d,props:{},children:[{type:a,value:v}]},{type:a,value:" 미들웨어에 옵션을 넣는 대신 라우터의 응답 객체 "},{type:b,tag:d,props:{},children:[{type:a,value:O}]},{type:a,value:"의 "},{type:b,tag:d,props:{},children:[{type:a,value:"setHeader()"}]},{type:a,value:" 메소드를 사용하여 응답 헤더를 설정할 수 있다."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:"div",props:{className:["nuxt-content-highlight"]},children:[{type:b,tag:"pre",props:{className:["language-js","line-numbers"]},children:[{type:b,tag:d,props:{},children:[{type:a,value:O},{type:b,tag:e,props:{className:[g,i]},children:[{type:a,value:P}]},{type:b,tag:e,props:{className:[g,Q,R,S]},children:[{type:a,value:T}]},{type:b,tag:e,props:{className:[g,i]},children:[{type:a,value:U}]},{type:b,tag:e,props:{className:[g,w]},children:[{type:a,value:"'Access-Control-Allow-Origin'"}]},{type:b,tag:e,props:{className:[g,i]},children:[{type:a,value:V}]},{type:a,value:W},{type:b,tag:e,props:{className:[g,w]},children:[{type:a,value:"'localhost:3000'"}]},{type:b,tag:e,props:{className:[g,i]},children:[{type:a,value:X}]},{type:b,tag:e,props:{className:[g,i]},children:[{type:a,value:Y}]},{type:a,value:"\nres"},{type:b,tag:e,props:{className:[g,i]},children:[{type:a,value:P}]},{type:b,tag:e,props:{className:[g,Q,R,S]},children:[{type:a,value:T}]},{type:b,tag:e,props:{className:[g,i]},children:[{type:a,value:U}]},{type:b,tag:e,props:{className:[g,w]},children:[{type:a,value:"'Access-Control-Allow-Credentials'"}]},{type:b,tag:e,props:{className:[g,i]},children:[{type:a,value:V}]},{type:a,value:W},{type:b,tag:e,props:{className:[g,w]},children:[{type:a,value:"'true'"}]},{type:b,tag:e,props:{className:[g,i]},children:[{type:a,value:X}]},{type:b,tag:e,props:{className:[g,i]},children:[{type:a,value:Y}]},{type:a,value:" \n"}]}]}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{id:G},children:[{type:b,tag:h,props:{href:"#%EC%BF%A0%ED%82%A4-%EC%A0%80%EC%9E%A5-%EB%B0%8F-%EC%A1%B0%ED%9A%8C",ariaHidden:j,tabIndex:n},children:[{type:b,tag:e,props:{className:[o,p]},children:[]}]},{type:a,value:H}]},{type:a,value:c},{type:b,tag:t,props:{},children:[{type:a,value:"이제 "},{type:b,tag:d,props:{},children:[{type:a,value:"res.cookie(쿠키_이름, 값, 옵션)"}]},{type:a,value:"로 쿠키를 저장하면 브라우저에서 "},{type:b,tag:d,props:{},children:[{type:a,value:Z}]},{type:a,value:"로 볼 수 있다."}]},{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:"document.cookie()"}]},{type:a,value:"가 아님에 주의하자. 메소드가 아니라 속성이다."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{id:r},children:[{type:b,tag:h,props:{href:"#%EC%A3%BC%EC%9D%98%EC%82%AC%ED%95%AD",ariaHidden:j,tabIndex:n},children:[{type:b,tag:e,props:{className:[o,p]},children:[]}]},{type:a,value:r}]},{type:a,value:c},{type:b,tag:t,props:{},children:[{type:b,tag:d,props:{},children:[{type:a,value:"res.cookie()"}]},{type:a,value:"에 옵션으로 "},{type:b,tag:d,props:{},children:[{type:a,value:"{ httpOnly: true }"}]},{type:a,value:" 값을 주면 "},{type:b,tag:d,props:{},children:[{type:a,value:Z}]},{type:a,value:"로 볼 수 없다. 이 옵션을 설정하면 HTTP로 통신하는 경우에만 쿠키를 사용하게 된다."}]},{type:a,value:c},{type:b,tag:m,props:{id:s},children:[{type:b,tag:h,props:{href:"#%EC%B6%9C%EC%B2%98",ariaHidden:j,tabIndex:n},children:[{type:b,tag:e,props:{className:[o,p]},children:[]}]},{type:a,value:s}]},{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:h,props:{href:_,rel:[x,y,z],target:A},children:[{type:a,value:_}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:h,props:{href:$,rel:[x,y,z],target:A},children:[{type:a,value:$}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:h,props:{href:aa,rel:[x,y,z],target:A},children:[{type:a,value:aa}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:h,props:{href:ab,rel:[x,y,z],target:A},children:[{type:a,value:ab}]}]},{type:a,value:c}]}]};B.text="\n## 개요\n\n- 백엔드와 프론트엔드의 도메인 주소가 다르면 서버로부터 쿠키를 전달받을 수 없다.\n- 따라서 요청\u002F응답 헤더를 설정할 필요가 있다.\n- 프론트엔드에서는 AJAX 요청을 할 때 요청 헤더를 설정해야 한다.\n- 백엔드에서는 CORS 설정을 통해 응답 헤더를 설정해야 한다.\n\n## 프론트에서 AJAX 요청 시 옵션 추가\n\n프론트에서 AJAX(`axios` 등)로 요청을 보낼 때 `{ withCredentials: true }` 옵션 추가하여 요청 헤더를 설정한다.  \n(Vue의 `axios` 플러그인을 사용한다면 `axios.create()`에 `{ withCredentials: true }` 옵션을 인수로 추가할 수 있다.)\n\n## 서버에서 CORS 설정\n\n응답 헤더의 `Access-Control-Allow-Credentials`, `Access-Control-Allow-Origin` 옵션 설정해야 한다.\n- 방법 1: Express의 `cors` 미들웨어 사용\n  - `Access-Control-Allow-Credentials` 옵션 설정 방법: `cors` 미들웨어에 `{ credentials: true }` 옵션 추가\n  - `Access-Control-Allow-Origin` 옵션 설정 방법: `cors` 미들웨어에 `{ origin: 요청 오리진(출처 도메인) }` 옵션 추가\n    - 값을 `*`으로 주면 **모든 오리진을 허용**하므로 주의할 것\n    - 특정 오리진 대신 `true` 값을 주면 현재 프론트 도메인 주소가 자동으로 `Access-Control-Allow-Origin`에 들어간다. 만약 프론트의 도메인 주소가 `localhost:8080`이라면, `Access-Control-Allow-Origin`의 값은 자동으로 `localhost:8080`이 된다.\n- 방법 2: 라우터에서 응답 헤더를 직접 넣는 방법\n  - 위의 방법처럼 `cors` 미들웨어에 옵션을 넣는 대신 라우터의 응답 객체 `res`의 `setHeader()` 메소드를 사용하여 응답 헤더를 설정할 수 있다.\n  ```js\n  res.setHeader('Access-Control-Allow-Origin', 'localhost:3000');\n  res.setHeader('Access-Control-Allow-Credentials', 'true'); \n  ```\n\n## 쿠키 저장 및 조회\n\n이제 `res.cookie(쿠키_이름, 값, 옵션)`로 쿠키를 저장하면 브라우저에서 `document.cookie`로 볼 수 있다.\n- `document.cookie()`가 아님에 주의하자. 메소드가 아니라 속성이다.\n\n## 주의사항\n\n`res.cookie()`에 옵션으로 `{ httpOnly: true }` 값을 주면 `document.cookie`로 볼 수 없다. 이 옵션을 설정하면 HTTP로 통신하는 경우에만 쿠키를 사용하게 된다.\n\n## 출처\n\n- https:\u002F\u002Fwww.zerocho.com\u002Fcategory\u002FNodeJS\u002Fpost\u002F5a6c347382ee09001b91fb6a\n- https:\u002F\u002Fwww.zerocho.com\u002Fcategory\u002FNodeJS\u002Fpost\u002F5e9bf5b18dcb9c001f36b275\n- https:\u002F\u002Fko.javascript.info\u002Fcookie\n- https:\u002F\u002Fopentutorials.org\u002Fcourse\u002F3387\u002F21744\n";B.dir="\u002Fposts\u002F2021\u002F04\u002F15";B.path="\u002Fposts\u002F2021\u002F04\u002F15\u002Fget-cookie-from-express-server";B.extension=".md";B.createdAt=ac;B.updatedAt="2022-06-26T10:23:37.000Z";return {data:[{post:B,prev:{slug:"mongoose-v-field",title:"Mongoose __v 필드",createdAt:ac},next:{slug:"vue-meta",title:"Vue에서 \u003Chead\u003E 태그에 meta 정보 추가하기",createdAt:"2021-04-15T09:44:29.000Z"}}],fetch:{},mutations:[["SET_POST",B],["CLEAR_HEADER_IMAGE",void 0],["SET_HEADER_IMAGE_STATE",true],["SET_SCROLL_STATE",false]]}}("text","element","\n","code","span","li","token","a","punctuation","true","ul",2,"h2",-1,"icon","icon-link","개요","주의사항","출처","p","Access-Control-Allow-Origin","cors","string","nofollow","noopener","noreferrer","_blank",{},"프론트에서-ajax-요청-시-옵션-추가","프론트에서 AJAX 요청 시 옵션 추가","서버에서-cors-설정","서버에서 CORS 설정","쿠키-저장-및-조회","쿠키 저장 및 조회","axios","{ withCredentials: true }","Access-Control-Allow-Credentials"," 옵션 설정 방법: "," 미들웨어에 ","localhost:8080","res",".","method","function","property-access","setHeader","(",","," ",")",";","document.cookie","https:\u002F\u002Fwww.zerocho.com\u002Fcategory\u002FNodeJS\u002Fpost\u002F5a6c347382ee09001b91fb6a","https:\u002F\u002Fwww.zerocho.com\u002Fcategory\u002FNodeJS\u002Fpost\u002F5e9bf5b18dcb9c001f36b275","https:\u002F\u002Fko.javascript.info\u002Fcookie","https:\u002F\u002Fopentutorials.org\u002Fcourse\u002F3387\u002F21744","2021-04-15T09:10:51.000Z")));